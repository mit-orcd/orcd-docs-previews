
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://orcd.mit.edu/software/python/">
      
      
        <link rel="prev" href="../modules/">
      
      
        <link rel="next" href="../../recipes/mujoco/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.21">
    
    
      
        <title>Python - ORCD Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-python-packages" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ORCD Docs" class="md-header__button md-logo" aria-label="ORCD Docs" data-md-component="logo">
      
  <img src="../../images/ORCD_logo_icononly.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ORCD Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Python
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ORCD Docs" class="md-nav__button md-logo" aria-label="ORCD Docs" data-md-component="logo">
      
  <img src="../../images/ORCD_logo_icononly.png" alt="logo">

    </a>
    ORCD Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../orcd-systems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ORCD Systems
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Filesystems and File Transfer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Filesystems and File Transfer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filesystems-file-transfer/filesystems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General Use Filesystems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filesystems-file-transfer/project-filesystems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Specific Filesystems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filesystems-file-transfer/transferring-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transferring Files
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Python
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#modules-for-python" class="md-nav__link">
    <span class="md-ellipsis">
      Modules for Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Python Virtual Environments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python Virtual Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-python-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Python Virtual Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-python-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Using Python Virtual Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirementstxt-and-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements.txt and Virtual Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros-and-cons-for-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Pros and Cons for Virtual Environments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conda-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Conda Environments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conda Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-conda-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Conda Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-conda-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Using Conda Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros-and-cons-for-conda-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Pros and Cons for Conda Environments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#home-directory-install" class="md-nav__link">
    <span class="md-ellipsis">
      Home Directory Install
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Home Directory Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pros-and-cons-for-local-install" class="md-nav__link">
    <span class="md-ellipsis">
      Pros and Cons for .local Install
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-python-package-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting Python Package Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting Python Package Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-python-executable" class="md-nav__link">
    <span class="md-ellipsis">
      Check your Python Executable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-pythons-path" class="md-nav__link">
    <span class="md-ellipsis">
      Check Python's Path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condamamba-init" class="md-nav__link">
    <span class="md-ellipsis">
      Conda/Mamba Init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-is-not-activating-in-a-job-script" class="md-nav__link">
    <span class="md-ellipsis">
      Environment is not Activating in a Job Script
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment is not Activating in a Job Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activating-a-virtual-environment-in-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Activating a Virtual Environment in a Script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activating-a-condamamba-environment-in-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Activating a Conda/Mamba Environment in a Script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ORCD Recipes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            ORCD Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/mujoco/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MuJoCo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/nvhpc-a100-with-cuda-and-mpi-example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NVHPC with CUDA aware MPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/gromacs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GROMACS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/mpi4py/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MPI for Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/mpi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MPI jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/relion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RELION
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/vscode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VSCode
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../acknowledgements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acknowledging Us
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Security and Privacy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-of-conduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acceptable Use and Code of Conduct
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-help/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Help
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#modules-for-python" class="md-nav__link">
    <span class="md-ellipsis">
      Modules for Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Python Virtual Environments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python Virtual Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-python-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Python Virtual Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-python-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Using Python Virtual Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirementstxt-and-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements.txt and Virtual Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros-and-cons-for-virtual-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Pros and Cons for Virtual Environments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conda-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Conda Environments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conda Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-conda-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Conda Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-conda-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Using Conda Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros-and-cons-for-conda-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Pros and Cons for Conda Environments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#home-directory-install" class="md-nav__link">
    <span class="md-ellipsis">
      Home Directory Install
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Home Directory Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pros-and-cons-for-local-install" class="md-nav__link">
    <span class="md-ellipsis">
      Pros and Cons for .local Install
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-python-package-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting Python Package Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting Python Package Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-your-python-executable" class="md-nav__link">
    <span class="md-ellipsis">
      Check your Python Executable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-pythons-path" class="md-nav__link">
    <span class="md-ellipsis">
      Check Python's Path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condamamba-init" class="md-nav__link">
    <span class="md-ellipsis">
      Conda/Mamba Init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-is-not-activating-in-a-job-script" class="md-nav__link">
    <span class="md-ellipsis">
      Environment is not Activating in a Job Script
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment is not Activating in a Job Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activating-a-virtual-environment-in-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Activating a Virtual Environment in a Script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activating-a-condamamba-environment-in-a-script" class="md-nav__link">
    <span class="md-ellipsis">
      Activating a Conda/Mamba Environment in a Script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  
<nav class="md-tags" >
  
    
    
    
      <a href="../../tags/#software" class="md-tag">Software</a>
    
  
    
    
    
      <a href="../../tags/#python" class="md-tag">python</a>
    
  
</nav>



<h1 id="installing-python-packages">Installing Python Packages</h1>
<p>There are a few different ways to install Python packages. Each ORCD system has its own set of Python modules and naming conventions for those, along with a set of recommendations for installing Python packages. This page is meant to give a general overview and link to those pages.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Engaging</label><label for="__tabbed_1_2">Satori</label><label for="__tabbed_1_3">SuperCloud</label><label for="__tabbed_1_4">OpenMind</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><a href="https://engaging-web.mit.edu/eofe-wiki/software/python_packages/">Engaging Installing Python Packages Documentation</a></p>
</div>
<div class="tabbed-block">
<p><a href="https://mit-satori.github.io/satori-using-anaconda.html">Satori Installing Python Packages Documentation</a></p>
</div>
<div class="tabbed-block">
<p><a href="https://mit-supercloud.github.io/supercloud-docs/software-packages/#python-packages">SuperCloud Installing Python Packages Documentation</a></p>
</div>
<div class="tabbed-block">
<p><a href="https://github.mit.edu/MGHPCC/OpenMind/wiki/How-to-make-Python-ready-for-use%3F">OpenMind Installing Python Packages Documentation</a></p>
</div>
</div>
</div>
<p>Python packages will need to be installed in your home directory or other directory you have write access to. There are a few different ways to do this, each with its own pros and cons. At a high level, you can:</p>
<ul>
<li><a href="#python-virtual-environments">Install packages in your own Python Virtual Environment (venv)</a></li>
<li><a href="#conda-environments">Install packages in your own conda/mamba environment</a></li>
<li><a href="#home-directory-install">Install packages to you home directory space using the <code>pip install --user</code> command</a></li>
</ul>
<h2 id="modules-for-python">Modules for Python</h2>
<p>Python is provided on all ORCD systems through either Python, Anaconda or similar <a href="../modules/">modules</a>. See the documentation for the system your are using above for a description of the modules available. Some systems have some commonly used Python packages installed with their modules, so it is worth checking to see if these packages will satisfy your use case before installing your own.</p>
<p>Refer to the tab below to find out more about the Python modules available on the system you are using.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Engaging</label><label for="__tabbed_2_2">Satori</label><label for="__tabbed_2_3">SuperCloud</label><label for="__tabbed_2_4">OpenMind</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Some nodes on Engaging have different operating systems (OS). The newest nodes on Engaging are Rocky 8 and older nodes are Centos 7. Each OS has a different software stack, and so has different sets of Python and Anaconda modules. Both will have both Python and Anaconda modules, but will may have different names and versions. Check <code>module avail</code> for this information. Be sure the OS of the login node you are using to launch jobs matches the OS of the compute nodes you are requesting.</p>
<p>For Rocky 8 nodes we recommend using the miniforge module, currently available in the community software:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>module<span class="w"> </span>use<span class="w"> </span>/orcd/software/community/001/modulefiles/rocky8/
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>module<span class="w"> </span>load<span class="w"> </span>miniforge/23.11.0-0
</span></code></pre></div>
</div>
<div class="tabbed-block">
<p>Satori Python and Anaconda modules are rather old so the advice is to install your own <a href="https://conda-forge.org/download/">miniforge</a> or <a href="https://docs.anaconda.com/free/miniconda/miniconda-install/">miniconda</a>. Home directories on Satori are quite small, so the recommendation is to install these into <code>/nobackup/users/$USER</code> where you have more space.</p>
<p>Once it is installed you will need to add channels to your conda configuration:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>conda<span class="w"> </span>config<span class="w"> </span>--prepend<span class="w"> </span>channels<span class="w"> </span>https://public.dhe.ibm.com/ibmdl/export/pub/software/server/ibm-ai/conda/
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>conda<span class="w"> </span>config<span class="w"> </span>--prepend<span class="w"> </span>channels<span class="w"> </span>https://opence.mit.edu
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>conda<span class="w"> </span>config<span class="w"> </span>--prepend<span class="w"> </span>channels<span class="w"> </span>https://ftp.osuosl.org/pub/open-ce/current
</span></code></pre></div>
<p>These channels contain packages compiled for Satori's PowerPC architecture.</p>
</div>
<div class="tabbed-block">
<p>SuperCloud releases two anaconda modules per year, named for the year and the release (anaconda/2024a and anaconda/2024b, for example). The most recent modules may continue to be updated until the next "release". There are separate modules for machine learning frameworks (ex: anaconda/Python-ML-2023b). SuperCloud anaconda modules contain a lot of the most commonly used packages and are installed on the local disk of each node, so it is best if you can use packages installed in the modules as much as possible.</p>
</div>
<div class="tabbed-block">
<p>OpenMind has both Anaconda and miniconda modules available. They have some of the most commonly used packages already installed.</p>
</div>
</div>
</div>
<h2 id="python-virtual-environments">Python Virtual Environments</h2>
<p>Environments allow you to make self-contained “bundles” of packages that can be loaded and unloaded. This helps keep a consistent set of packages and versions for a given project, rather than putting them all together like they would be in <a href="#home-directory-install">.local</a>. Python virtual environments can be placed anywhere you have write access to and have all their packages in that environment’s directory structure.</p>
<h3 id="creating-python-virtual-environments">Creating Python Virtual Environments</h3>
<p>To create a new environment, first load a Python or Anaconda module using the <code>module load</code> command. See the page on <a href="../modules/">Modules</a> for more information on how to load modules. See <a href="#modules-for-python">Modules for Python</a> above for information about specific modules for the system you are using.</p>
<p>To create a the environment use the <code>python -m venv</code> command: </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>/path/to/virtual/environment
</span></code></pre></div>
<p>Note that you specify a path, and not only a name for the environment. This means you can place your environment wherever you'd like. Usually it is placed somewhere in the project directory it is used for. For example, if I want to create an environment for a project called <code>my_project</code> that lives in my home directory, I would run something like:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">cd</span><span class="w"> </span>~/my_project
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>my_project_env
</span></code></pre></div>
<p>This will create an environment at the path <code>~/my_project/my_project_env</code>.</p>
<p>By default environments will be fully isolated and Python will only see the packages you've installed in the environment. You can signal your virtual environment to "see" system installed packages by using the flag <code>--system-site-packages</code> when creating the environment. This is useful when the module you are using has packages already installed. For example:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>--system-site-packages<span class="w"> </span>my_project_env
</span></code></pre></div>
<p>Before installing packages or using an environment we need to activate the environment:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">source</span><span class="w"> </span>/path/to/virtual/environment/bin/activate
</span></code></pre></div>
<p>Using our example above, if we are in the <code>my_project</code> directory already, we can run:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nb">source</span><span class="w"> </span>my_project_env
</span></code></pre></div>
<p>Finally we can now install packages into the environment. Once activating the environment new packages can be installed with the <code>pip</code> command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>pip<span class="w"> </span>install<span class="w"> </span>pkgname
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not use <code>--user</code> flag to install, this will install into <code>$HOME/.local</code> instead of the environment.</p>
</div>
<p>When you are done using or installing packages into an environment you can deactivate it with the command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>deactivate
</span></code></pre></div>
<h3 id="using-python-virtual-environments">Using Python Virtual Environments</h3>
<p>In order to use an environment you will need to activate it as described above. Once it is activated any <code>python</code> commands will run in that environment and have access to the packages in the environment. To use an environment in a job activate the environment in your job script. Using the same example above, let's look at the script <code>myjob.sh</code> in the <code>my_project</code> directory:</p>
<div class="language-bash highlight"><span class="filename">myjob.sh</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nb">source</span><span class="w"> </span>my_project_env
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>python<span class="w"> </span>myscript.py
</span></code></pre></div>
<p>When this job runs it will activate the environment in <code>my_project_env</code> and then run the python script <code>myscript.py</code> using the packages in that environment.</p>
<h3 id="requirementstxt-and-virtual-environments">Requirements.txt and Virtual Environments</h3>
<p>Environments can be described by a <code>requirements.txt</code> file, which lists packages and optionally their versions. This file can be creating from any environment and used to re-create the environment. Version numbers are required to recreate the environment exactly.</p>
<p>You can either create a <code>requirements.txt</code> file by hand by creating a file with one package name on each line, or you can create one from a currently active environment with the command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>pip<span class="w"> </span>freeze<span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
</span></code></pre></div>
<p>Given a <code>requirements.txt</code> file you can use <code>pip</code> to install the packages in that file into your environment. First activate the environment, then install the packages with:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nb">source</span><span class="w"> </span>/path/to/virtual/environment
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</span></code></pre></div>
<h3 id="pros-and-cons-for-virtual-environments">Pros and Cons for Virtual Environments</h3>
<p>Pros</p>
<ul>
<li>Can be set to build “on top of” the central installation packages (not default behavior, use the <code>--system-site-packages</code> flag when creating)</li>
<li>Self-contained environments for each project help stay organized and avoid package dependency conflicts. For software development it allows you to keep better track of your package’s dependencies so others know what they need to install.</li>
</ul>
<p>Cons</p>
<ul>
<li>Environments will be the same version of the python that you used to make them</li>
<li>Only installs packages available through PyPI, cannot install anaconda/conda-forge distributed packages</li>
</ul>
<h2 id="conda-environments">Conda Environments</h2>
<p>Environments allow you to make self-contained “bundles” of packages that can be loaded and unloaded. This helps keep a consistent set of packages and versions for a given project, rather than putting them all together like they would be in <code>.local</code>. Conda environments are a bit different from Python virtual environments, by default they are stored in the .conda directory in your home directory. They also tend to contain a lot more files than Virtual Environments. You can also install system libraries into conda environments, which can make installing packages with system library dependencies easier.</p>
<p>You'll also see mention of mamba environments. Mamba and conda are nearly the same, however mamba has a different dependency solver. Mamba is often better and faster than conda at solving dependencies and picking packages.</p>
<h3 id="creating-conda-environments">Creating Conda Environments</h3>
<p>First, load a conda or Anaconda module using the <code>module load</code> command. See the page on <a href="../modules/">Modules</a> for more information on how to load modules.</p>
<!--
TODO: add info about conda channels for Satori
-->

<p>If there is no anaconda module on the system you are using, or the modules available aren't sufficient for your work, we recommend installing <a href="https://conda-forge.org/download/">miniforge</a> or <a href="https://docs.anaconda.com/free/miniconda/miniconda-install/">miniconda</a> in your home directory (we have had the most recent success with miniforge, which is distributed by conda-forge and is packaged with mamba). It is best to avoid installing the full Anaconda as it is very big and can fill up your home directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using SuperCloud do not install miniconda or miniforge in your home directory. SuperCloud keeps up to date anaconda modules so installing your own is not necessary and will slow down your applications. See this <a href="https://mit-supercloud.github.io/supercloud-docs/filesystem/#installing-python-packages">Best Practices</a> page on SuperCloud-Docs for more information.</p>
</div>
<p>To create an environment you can use the <code>conda create</code> or <code>mamba create</code> command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>my_env<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.10<span class="w"> </span>pkg1<span class="w"> </span>pkg2<span class="w"> </span>pkg3
</span></code></pre></div>
<p>or, using <code>mamba</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>mamba<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>my_env<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.10<span class="w"> </span>pkg1<span class="w"> </span>pkg2<span class="w"> </span>pkg3
</span></code></pre></div>
<p>In this example I am creating a conda environment named <code>my_env</code> with Python 3.10 and installing packages pkg1, pkg2, pkg3. We have found that conda creates more robust environments when you include all the packages you need when you create the environment. Then, whenever you want to activate the environment, first load the anaconda module, then activate with <code>source activate my_env</code>. Using <code>source activate</code> instead of <code>conda activate</code> allows you to use your conda environment at the command line and in submission scripts without additional steps. See <a href="#condamamba-init">Conda/Mamba Init</a> in the Troubleshooting section below for more information.</p>
<p>If you would like to use your conda environment in Jupyter, simply install the "jupyter" package into your environment. Once you have done that, you should see your conda environment listed in the available kernels.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using a conda environment and would like to install the package with <code>pip</code> in that environment rather than in the standard home directory location, you should <em>not</em> include the <code>--user</code> flag. Further, if you are using a conda environment and want Python to use packages in your environment first, you can run the following two command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONNOUSERSITE</span><span class="o">=</span>True
</span></code></pre></div>
<p>This will make sure your conda environment packages will be chosen before those that may be installed in your home directory.</p>
</div>
<h3 id="using-conda-environments">Using Conda Environments</h3>
<p>As mentioned above, to activate a conda environment first load an anaconda module then activate with the <code>source activate</code> command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>module<span class="w"> </span>load<span class="w"> </span>ananconda-module
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="nb">source</span><span class="w"> </span>activate<span class="w"> </span>myenv
</span></code></pre></div>
<p>To use a conda environment in a job you can usually add these lines to you job script:</p>
<div class="language-bash highlight"><span class="filename">myjob.sh</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>module<span class="w"> </span>load<span class="w"> </span>ananconda-module
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="nb">source</span><span class="w"> </span>activate<span class="w"> </span>env_name
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>python<span class="w"> </span>myscript.py
</span></code></pre></div>
<p>If this isn't working, see the Troubleshooting section below on <a href="#environment-is-not-activating-in-a-job-script">activating an environment in a job script</a>.</p>
<h3 id="pros-and-cons-for-conda-environments">Pros and Cons for Conda Environments</h3>
<p>Pros</p>
<ul>
<li>Environments can be created with any supported version of Python.</li>
<li>Can install packages available through various conda channels as well as PyPI (packages installed with <code>pip</code>).<ul>
<li>Conda channels include many system libraries, making packages with complicated dependencies easier to install.</li>
</ul>
</li>
<li>Self-contained environments for each project help stay organized and avoid package dependency conflicts. For software development it allows you to keep better track of your package’s dependencies so others know what they need to install.</li>
</ul>
<p>Cons</p>
<ul>
<li>Can not be set to build “on top of” the central installation packages, which means basic package will be re-installed in your home directory.</li>
<li>Can get very large and take up a lot of space in your home directory.</li>
<li>It can sometimes be slower than other options.</li>
</ul>
<h2 id="home-directory-install">Home Directory Install</h2>
<p>First, load a Python or Anaconda module using the <code>module load</code> command. See the page on <a href="../modules/">Modules</a> for more information on how to load modules.</p>
<p>Then, install the package with pip using the <code>--user</code> flag:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>packageName
</span></code></pre></div>
<p>Where <code>packageName</code> is the name of the package that you are installing.</p>
<p>With <code>pip install --user</code> you are installing a single package and any missing dependencies. Pip will see any packages already installed in the central Python installation and won’t reinstall those as log as they satisfy the dependency requirements. These get installed to:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>$HOME/.local/lib/pythonV.V/site-packages
</span></code></pre></div>
<p>This location is usually first in Python’s package search path, so Python will pick up any libraries installed here before centrally installed ones. The exceptions are:</p>
<ul>
<li>If you have the <code>PYTHONPATH</code> environment variable set, that location will be searched first</li>
<li>You have the <code>PYTHONNOUSERSITE</code> environment variable set to True, this tells Python to remove it from the path</li>
</ul>
<h3 id="pros-and-cons-for-local-install">Pros and Cons for .local Install</h3>
<p>Pros</p>
<ul>
<li>The installs are usually pretty easy</li>
<li>Only installs what is absolutely needed, allowing Python to use centrally installed packages</li>
</ul>
<p>Cons</p>
<ul>
<li>Keeping and tracking a consistent environment is harder, not great for package development or working on different projects with conflicting requirements</li>
<li>Everything you’ve installed is always in your environment, which can cause two issues:<ul>
<li>The space can eventually get “dirty” or “corrupted”, the easiest fix is to delete or rename <code>$HOME/.local</code> and start again</li>
<li>You can run into package dependency conflict issues, which could be fixed by uninstalling packages no longer needed or by deleting or renaming <code>$HOME/.local</code> and starting again</li>
</ul>
</li>
</ul>
<h2 id="troubleshooting-python-package-issues">Troubleshooting Python Package Issues</h2>
<h3 id="check-your-python-executable">Check your Python Executable</h3>
<p>When you use the <code>python</code> command Linux will pick the first <code>python</code> executable it finds in your <code>$PATH</code>. If Python is not finding your installed packages it is possible that the <code>python</code> running is not what you expect. Run the command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>which<span class="w"> </span>python
</span></code></pre></div>
<p>This will print out the path to the <code>python</code> executable that is running. If it doesn't print the right one, check that you've activated your environment or loaded the module you were intending.</p>
<h3 id="check-pythons-path">Check Python's Path</h3>
<p>Python has its own path that gets set when it looks for packages. This path depends on a few things, such as whether you have an environment loaded and how that environment is configured. When in doubt you can view this path in Python with the following commands:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">import</span> <span class="nn">sys</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="n">sys</span><span class="o">.</span><span class="n">path</span>
</span></code></pre></div>
<p>Similar to the <code>PATH</code> environment variable, Python checks the locations on the path in the order they are listed and imports the first of the specified package it finds. If Python is loading the wrong version of a package, checking the path will tell you where to check for the wrong-version package. If Python can't find the package, the path will give you more information about where it is looking.</p>
<h3 id="condamamba-init">Conda/Mamba Init</h3>
<p>If you use conda or mamba you may at some point be asked to run <code>conda init</code> or <code>mamba init</code>. These commands will edit your <code>.bashrc</code> file which gets run every time you log in. These additional lines will make permanent changes to your environment that could have unintended effects on your use of the system. This can cause issues, including slowing down your logins and affecting any software builds you try to do.</p>
<p>The best thing to do is to never run these commands, or if you have, to remove the lines that they  have added to your <code>.bashrc</code> file. Instead of running <code>conda activate</code> or <code>mamba activate</code>, you can use the <code>source activate</code> command.</p>
<p>If this doesn't work for you, as an alternative, you can run the following line:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nb">source</span><span class="w"> </span>/path/to/conda/install/etc/profile.d/conda.sh
</span></code></pre></div>
<p>whenever you want to use the <code>conda activate</code> command. Be sure to replace <code>/path/to/conda/install</code> with the path to the conda installation, for example if you installed miniforge in your home directory the full path might be <code>$HOME/miniforge3/etc/profile.d/conda.sh</code>.</p>
<p>If you would like to use <code>mamba activate</code>, run the following line as well:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nb">source</span><span class="w"> </span>/path/to/conda/install/etc/profile.d/mamba.sh
</span></code></pre></div>
<p>Both of these lines can be run at the command line, or put in a job script or setup script. Note that environments activated at the command line before launching a job may not carry over to the job itself, so it is always best load these environments in your job script.</p>
<div class="language-bash highlight"><span class="filename">mycondajob.sh</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nb">source</span><span class="w"> </span>/path/to/conda/install/etc/profile.d/conda.sh
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="nb">source</span><span class="w"> </span>/path/to/conda/install/etc/profile.d/mamba.sh<span class="w"> </span><span class="c1">#optional</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>conda<span class="w"> </span>activate<span class="w"> </span>myenv<span class="w"> </span><span class="c1"># or `mamba activate myenv` for mamba environments</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>python<span class="w"> </span>myscript.sh
</span></code></pre></div>
<p>If you feel strongly that you want to keep the setup that <code>conda init</code> gives you in your <code>.bashrc</code>, first be aware that it could cause issues and it might be something to look into removing when troubleshooting. Second, one of the things these lines do is activate the base environment associated with the conda installation, which is usually the source of most of the issues you can run into. You can set conda to not activate the base environment at login by running the following line:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>conda<span class="w"> </span>config<span class="w"> </span>--set<span class="w"> </span>auto_activate_base<span class="w"> </span><span class="nb">false</span>
</span></code></pre></div>
<p>You only need to run this line once. It will edit a configuration file for conda (.condarc). You will still be able to run <code>conda activate</code></p>
<h3 id="environment-is-not-activating-in-a-job-script">Environment is not Activating in a Job Script</h3>
<p>Getting your python virtual environment or conda/mamba environment to activate in a batch job can sometimes be finicky.</p>
<p>Check your log file to be sure you aren't getting any errors when you try to activate the environment. They may give further instruction on what to do.</p>
<p>Usually the cause is something in your environment that is interfering, these could be:</p>
<ul>
<li>The <code>PYTHONPATH</code> environment variable is set- this changes where Python looks for packages first. Best practice is to not use <code>PYTHONPATH</code> when possible.</li>
<li>You have another environment activated (see <a href="#condamamba-init">Conda/Mamba Init</a>).</li>
<li>Your python script starts with a line like <code>#!/bin/python</code> or similar. This tells the system to run the script with a python executable that isn't part of your environment. Removing the line will fix the issue.</li>
</ul>
<p>Beyond this, there are a few things you can try. These won't necessarily fix your environment issues, but might work around them. First let's talk about virtual environments, then conda environments.</p>
<h4 id="activating-a-virtual-environment-in-a-script">Activating a Virtual Environment in a Script</h4>
<p>Usually activating the environment in your job script before running your Python script is sufficient. </p>
<p>If your environment isn't activating, specifying the full path to the python executable in your environment sometimes fixes things. Here is a sample job script:</p>
<div class="language-bash highlight"><span class="filename">myjob.sh</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="nb">source</span><span class="w"> </span>/path/to/virtual/environment/bin/activate
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>/path/to/virtual/environment/bin/python<span class="w"> </span>myscript.py
</span></code></pre></div>
<p>Be sure to replace <code>/path/to/virtual/environment</code> with the actual path to your virtual environment.</p>
<h4 id="activating-a-condamamba-environment-in-a-script">Activating a Conda/Mamba Environment in a Script</h4>
<p>Usually loading an anaconda module and then running <code>source activate myenv</code> will work to activate a conda or mamba environment in a job script (as shown <a href="#anaconda-environments">above</a>).</p>
<p>One thing to try is suggested above in <a href="#condamamba-init">Conda/Mamba Init</a>:</p>
<div class="language-bash highlight"><span class="filename">mycondajob.sh</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="nb">source</span><span class="w"> </span>/path/to/conda/install/etc/profile.d/conda.sh
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="nb">source</span><span class="w"> </span>/path/to/conda/install/etc/profile.d/mamba.sh<span class="w"> </span><span class="c1">#optional</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>conda<span class="w"> </span>activate<span class="w"> </span>myenv<span class="w"> </span><span class="c1"># or `mamba activate myenv` for mamba environments</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>python<span class="w"> </span>myscript.sh
</span></code></pre></div>
<p>If this doesn't work sometimes adding <code>eval "$(conda shell.bash hook)"</code> in the line before activating the environment will make it work.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">May 8, 2024</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a href="https://accessibility.mit.edu/">Accessibility</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.a7c05c9e.min.js"></script>
      
        <script src="../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>